"use strict";(self.webpackChunkelucidate=self.webpackChunkelucidate||[]).push([[796],{5583:(e,i,t)=>{t.d(i,{H:()=>h});var n=t(8563),s=t.n(n),a=t(5401),l=t(4231),r=t(7318),o=t(9778),d=t(4093);class h extends d.S{_setup(e,i){this.$element=e,this.options=s().extend({},h.defaults,this.$element.data(),i),this.className="Drilldown",this._init(),a.N.register("Drilldown",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}_init(){l.o.Feather(this.$element,"drilldown"),this.options.autoApplyClass&&this.$element.addClass("drilldown"),this.$element.attr({"aria-multiselectable":!1}),this.$submenuAnchors=this.$element.find("li.is-drilldown-submenu-parent").children("a"),this.$submenus=this.$submenuAnchors.parent("li").children("[data-submenu]").attr("role","group"),this.$menuItems=this.$element.find("li").not(".js-drilldown-back").find("a"),this.$currentMenu=this.$element,this.$element.attr("data-mutate",this.$element.attr("data-drilldown")||(0,r.mO)(6,"drilldown")),this._prepareMenu(),this._registerEvents(),this._keyboardEvents()}_prepareMenu(){var e=this;this.$submenuAnchors.each((function(){var i=s()(this),t=i.parent();e.options.parentLink&&i.clone().prependTo(t.children("[data-submenu]")).wrap('<li data-is-parent-link class="is-submenu-parent-item is-submenu-item is-drilldown-submenu-item" role="none"></li>'),i.data("savedHref",i.attr("href")).removeAttr("href").attr("tabindex",0),i.children("[data-submenu]").attr({"aria-hidden":!0,tabindex:0,role:"group"}),e._events(i)})),this.$submenus.each((function(){var i=s()(this);if(!i.find(".js-drilldown-back").length)switch(e.options.backButtonPosition){case"bottom":i.append(e.options.backButton);break;case"top":i.prepend(e.options.backButton);break;default:console.error("Unsupported backButtonPosition value '"+e.options.backButtonPosition+"'")}e._back(i)})),this.$submenus.addClass("invisible"),this.options.autoHeight||this.$submenus.addClass("drilldown-submenu-cover-previous"),this.$element.parent().hasClass("is-drilldown")||(this.$wrapper=s()(this.options.wrapper).addClass("is-drilldown"),this.options.animateHeight&&this.$wrapper.addClass("animate-height"),this.$element.wrap(this.$wrapper)),this.$wrapper=this.$element.parent(),this.$wrapper.css(this._getMaxDims())}_resize(){this.$wrapper.css({"max-width":"none","min-height":"none"}),this.$wrapper.css(this._getMaxDims())}_events(e){var i=this;e.off("click.zf.drilldown").on("click.zf.drilldown",(function(t){if(s()(t.target).parentsUntil("ul","li").hasClass("is-drilldown-submenu-parent")&&t.preventDefault(),i._show(e.parent("li")),i.options.closeOnClick){var n=s()("body");n.off(".zf.drilldown").on("click.zf.drilldown",(function(e){e.target===i.$element[0]||s().contains(i.$element[0],e.target)||(e.preventDefault(),i._hideAll(),n.off(".zf.drilldown"))}))}}))}_registerEvents(){this.options.scrollTop&&(this._bindHandler=this._scrollTop.bind(this),this.$element.on("open.zf.drilldown hide.zf.drilldown close.zf.drilldown closed.zf.drilldown",this._bindHandler)),this.$element.on("mutateme.zf.trigger",this._resize.bind(this))}_scrollTop(){var e=this,i=""!==e.options.scrollTopElement?s()(e.options.scrollTopElement):e.$element,t=parseInt(i.offset().top+e.options.scrollTopOffset,10);s()("html, body").stop(!0).animate({scrollTop:t},e.options.animationDuration,e.options.animationEasing,(function(){this===s()("html")[0]&&e.$element.trigger("scrollme.zf.drilldown")}))}_keyboardEvents(){var e=this;this.$menuItems.add(this.$element.find(".js-drilldown-back > a, .is-submenu-parent-item > a")).on("keydown.zf.drilldown",(function(i){var t,n,l=s()(this),o=l.parent("li").parent("ul").children("li").children("a");o.each((function(e){if(s()(this).is(l))return t=o.eq(Math.max(0,e-1)),void(n=o.eq(Math.min(e+1,o.length-1)))})),a.N.handleKey(i,"Drilldown",{next:function(){if(l.is(e.$submenuAnchors))return e._show(l.parent("li")),l.parent("li").one((0,r.Cp)(l),(function(){l.parent("li").find("ul li a").not(".js-drilldown-back a").first().focus()})),!0},previous:function(){return e._hide(l.parent("li").parent("ul")),l.parent("li").parent("ul").one((0,r.Cp)(l),(function(){setTimeout((function(){l.parent("li").parent("ul").parent("li").children("a").first().focus()}),1)})),!0},up:function(){return t.focus(),!l.is(e.$element.find("> li:first-child > a"))},down:function(){return n.focus(),!l.is(e.$element.find("> li:last-child > a"))},close:function(){l.is(e.$element.find("> li > a"))||(e._hide(l.parent().parent()),l.parent().parent().siblings("a").focus())},open:function(){return(!e.options.parentLink||!l.attr("href"))&&(l.is(e.$menuItems)?l.is(e.$submenuAnchors)?(e._show(l.parent("li")),l.parent("li").one((0,r.Cp)(l),(function(){l.parent("li").find("ul li a").not(".js-drilldown-back a").first().focus()})),!0):void 0:(e._hide(l.parent("li").parent("ul")),l.parent("li").parent("ul").one((0,r.Cp)(l),(function(){setTimeout((function(){l.parent("li").parent("ul").parent("li").children("a").first().focus()}),1)})),!0))},handled:function(e){e&&i.preventDefault()}})}))}_hideAll(){var e=this.$element.find(".is-drilldown-submenu.is-active");if(e.addClass("is-closing"),e.parent().closest("ul").removeClass("invisible"),this.options.autoHeight){const i=e.parent().closest("ul").data("calcHeight");this.$wrapper.css({height:i})}this.$element.trigger("close.zf.drilldown"),e.one((0,r.Cp)(e),(()=>{e.removeClass("is-active is-closing"),this.$element.trigger("closed.zf.drilldown")}))}_back(e){var i=this;e.off("click.zf.drilldown"),e.children(".js-drilldown-back").on("click.zf.drilldown",(function(){i._hide(e);let t=e.parent("li").parent("ul").parent("li");t.length?i._show(t):i.$currentMenu=i.$element}))}_menuLinkEvents(){var e=this;this.$menuItems.not(".is-drilldown-submenu-parent").off("click.zf.drilldown").on("click.zf.drilldown",(function(){setTimeout((function(){e._hideAll()}),0)}))}_setShowSubMenuClasses(e,i){e.addClass("is-active").removeClass("invisible").attr("aria-hidden",!1),e.parent("li").attr("aria-expanded",!0),!0===i&&this.$element.trigger("open.zf.drilldown",[e])}_setHideSubMenuClasses(e,i){e.removeClass("is-active").addClass("invisible").attr("aria-hidden",!0),e.parent("li").attr("aria-expanded",!1),!0===i&&e.trigger("hide.zf.drilldown",[e])}_showMenu(e,i){var t=this;if(this.$element.find('li[aria-expanded="true"] > ul[data-submenu]').each((function(){t._setHideSubMenuClasses(s()(this))})),this.$currentMenu=e,e.is("[data-drilldown]"))return!0===i&&e.find("li > a").first().focus(),void(this.options.autoHeight&&this.$wrapper.css("height",e.data("calcHeight")));var n=e.children().first().parentsUntil("[data-drilldown]","[data-submenu]");n.each((function(a){0===a&&t.options.autoHeight&&t.$wrapper.css("height",s()(this).data("calcHeight"));var l=a===n.length-1;!0===l&&s()(this).one((0,r.Cp)(s()(this)),(()=>{!0===i&&e.find("li > a").first().focus()})),t._setShowSubMenuClasses(s()(this),l)}))}_show(e){const i=e.children("[data-submenu]");e.attr("aria-expanded",!0),this.$currentMenu=i,e.parent().closest("ul").addClass("invisible"),i.addClass("is-active visible").removeClass("invisible").attr("aria-hidden",!1),this.options.autoHeight&&this.$wrapper.css({height:i.data("calcHeight")}),this.$element.trigger("open.zf.drilldown",[e])}_hide(e){this.options.autoHeight&&this.$wrapper.css({height:e.parent().closest("ul").data("calcHeight")}),e.parent().closest("ul").removeClass("invisible"),e.parent("li").attr("aria-expanded",!1),e.attr("aria-hidden",!0),e.addClass("is-closing").one((0,r.Cp)(e),(function(){e.removeClass("is-active is-closing visible"),e.blur().addClass("invisible")})),e.trigger("hide.zf.drilldown",[e])}_getMaxDims(){var e=0,i={},t=this;return this.$submenus.add(this.$element).each((function(){var i=o.x.GetDimensions(this).height;e=i>e?i:e,t.options.autoHeight&&s()(this).data("calcHeight",i)})),this.options.autoHeight?i.height=this.$currentMenu.data("calcHeight"):i["min-height"]=`${e}px`,i["max-width"]=`${this.$element[0].getBoundingClientRect().width}px`,i}_destroy(){s()("body").off(".zf.drilldown"),this.options.scrollTop&&this.$element.off(".zf.drilldown",this._bindHandler),this._hideAll(),this.$element.off("mutateme.zf.trigger"),l.o.Burn(this.$element,"drilldown"),this.$element.unwrap().find(".js-drilldown-back, .is-submenu-parent-item").remove().end().find(".is-active, .is-closing, .is-drilldown-submenu").removeClass("is-active is-closing is-drilldown-submenu").off("transitionend otransitionend webkitTransitionEnd").end().find("[data-submenu]").removeAttr("aria-hidden tabindex role"),this.$submenuAnchors.each((function(){s()(this).off(".zf.drilldown")})),this.$element.find("[data-is-parent-link]").detach(),this.$submenus.removeClass("drilldown-submenu-cover-previous invisible"),this.$element.find("a").each((function(){var e=s()(this);e.removeAttr("tabindex"),e.data("savedHref")&&e.attr("href",e.data("savedHref")).removeData("savedHref")}))}}h.defaults={autoApplyClass:!0,backButton:'<li class="js-drilldown-back"><a tabindex="0">Back</a></li>',backButtonPosition:"top",wrapper:"<div></div>",parentLink:!1,closeOnClick:!1,autoHeight:!1,animateHeight:!1,scrollTop:!1,scrollTopElement:"",scrollTopOffset:0,animationDuration:500,animationEasing:"swing"}}}]);